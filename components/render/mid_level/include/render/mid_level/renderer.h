#ifndef RENDER_MID_LEVEL_RENDERER_HEADER
#define RENDER_MID_LEVEL_RENDERER_HEADER

namespace media
{

//forward declaration
class Image;

}

namespace render
{

namespace mid_level
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Базовый класс
///////////////////////////////////////////////////////////////////////////////////////////////////
class IObject
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Подсчёт ссылок
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual void AddRef  () = 0;
    virtual void Release () = 0;

  protected:
    virtual ~IObject () {}
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Текстура
///////////////////////////////////////////////////////////////////////////////////////////////////
class ITexture: virtual public IObject
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Копирование образа текстуры в картинку
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual void CaptureImage (media::Image&) = 0;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Буфер кадра
///////////////////////////////////////////////////////////////////////////////////////////////////
class IFrameBuffer: virtual public IObject
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Имя буфера кадра
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual const char* GetName () = 0;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение буфера цвета и буфера попиксельного отсечения
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual ITexture* GetColorBuffer () = 0;
    virtual ITexture* GetDepthStencilBuffer () = 0;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Система рендеринга
///////////////////////////////////////////////////////////////////////////////////////////////////
class IRenderer: virtual public IObject
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Описание
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual const char* GetDescription () = 0;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Перечисление доступных буферов кадра
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual size_t        GetFrameBuffersCount () = 0;
    virtual IFrameBuffer* GetFrameBuffer       (size_t index) = 0;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Создание ресурсов
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual ITexture* CreateDepthStencilBuffer () = 0;
    virtual ITexture* CreateRenderBuffer       () = 0;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Конец отрисовки
///////////////////////////////////////////////////////////////////////////////////////////////////
    virtual void DrawFrames () = 0;
};

}

}

#endif
